##4.2.3 ffmpeg配置
> ffmpeg 可以选择多种视频音频编码器对媒体进行渲染

这里我们选择几种我们会用到的视频编码器来安装
####1.确认组件
```
ffmpeg -version
```
![](/assets/微信截图_20180124102624.png)
因为上一节是默认配置安装，所以我们只有一些列基础库。
####2.libx264
libx264是当下十分火热的H264编码器。有着非常广泛的应用。
H264的优势：低码率，流畅连续的高清图像，高容错率，网络适应性强，高压缩比。

>H.264的压缩比是MPEG-2的2倍以上，是MPEG-4的1.5～2倍。举个例子，原始文件的大小如果为88GB，采用MPEG-2压缩标准压缩后变成3.5GB，压缩比为25∶1，而采用H.264压缩标准压缩后变为879MB，从88GB到879MB，H.264的压缩比达到惊人的102∶1

```
ffmpeg -i /tmp/nh.mp4 -vcodec libx264 -acodec aac -f flv rtmp://172.26.22.30:1935/mylive/66

```
可以看到我在命令中增加了-vcodec -acodec使用视频编码器libx264，使用音频编码器aac，输入后ffmpeg提示 Unknown encoder 'libx264'，并没有找到libx264。
######安装
重新配置及编译安装ffmpeg将新的libx264配置到ffmpeg
```
cd /download/ffmpeg
./configure --prefix=/usr/local/ffmpeg --enable-libx264 --enable-gpl
#启用libx264，libx264需要gpl
#提示ERROR: libx264 not found，可见264需要我们自己安装而并不是ffmpeg所默认包含的库
```
######下载libx264
1. http://www.videolan.org/developers/x264.html 由此网站下载
2. mkdir /download/x264
3. rz last_x264.tar.bz2
4. tar -jxvf last_x264.tar.bz2
5. mv x264-snapshot-20180123-2245 x264
6. cd x264
7. /configure --prefix=/usr/local/x264 --enable-shared
8. Minimum version is nasm-2.13这里会报错，因为我们之前只是安装了yasm但是nasm还没有安装，而且版本要求至少2.13.
9. 下载nasm http://www.nasm.us/pub/nasm/releasebuilds/
10. 选择2.13
11. mkdir /download/nasm
12. rz nasm-2.13.03rc1.tar.bz2
13. tar -jxvf nasm-2.13.03rc1.tar.bz2
14. mv nasm-2.13.03rc1 nasm
15. cd nasm
16. ./configure --prefix=/usr/local/nasm
17. make & make install
18. vim /etc/profile
19. 添加 export NASM=/usr/local/nasm/
20. 在export PATH头部添加 $NASM/bin:
![](/assets/微信截图_20180124112101.png)
21.




