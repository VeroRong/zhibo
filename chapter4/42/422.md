##4.2.2 ffmpeg的安装
>本节将从ffmpeg的安装到组件的选择进行讲述

####1.下载
http://ffmpeg.org/download.html
打开页面后选择download下载ffmpeg-x.x.x.tar.bz2
本文使用的版本为ffmpeg-3.4.1.tar.bz2
或通过wget命令在linux直接下载链接
####2.解压
通过rz命令上传到/download目录
```
tar -xjvf ffmpeg-3.4.1.tar.bz2
mv ffmpeg-3.4.1.tar.bz2 ffmpeg
cd ffmpeg
```
####3.配置
```
./configure --prefix=/usr/local/ffmpeg
```
在配置时可能出现如下问题
>没有办法创建临时文件到/tmp
检查我们是否有/tmp目录，如果没有我们只需要输入“mkdir /tmp”即可 
![](/assets/微信截图_20180123160920.png) 
再次确认配置后又可能出现如下问题，因为没有nasm/yasm或太旧的版本导致的问题
![](/assets/微信截图_20180123161221.png)
安装yasm
1. 下载地址http://yasm.tortall.net/Download.html
2. tar -zxvf yasm-1.3.0.tar.gz
3. ./configure --prefix=/usr/local/yasm
4. make & make install
5. vim /etc/profile
6. 添加export YASM=/usr/local/yasm/
7. 在export PATH头部追加 $YASM/bin:
![](/assets/微信截图_20180124105343.png) 
8. source /etc/profile

继续ffmpeg安装
```
cd /download/ffmpeg
./configure
make & make install
```
####4.测试
```
cd /usr/local/ffmpeg/bin
./ffmpeg -version
```
![](/assets/微信截图_20180123164736.png)
安装成功，在configuration下面的lib*都是我们默认安装的组件，组件问题下面再说。
####5.添加ffmpeg到环境变量
```
#profile 记录着系统中的环境变量设置
vim /etc/profile
```
找到文件尾部
如果看到尾部已经有export xx则在所有export前插入
```
export FFMPEG_HOME=/usr/local/ffmpeg
```
再把 $FFMPEG_HOME/bin: 插入到path变量前端
如果没有exprot在其中，则直接粘贴    
```
export FFMPEG_HOME=/usr/local/ffmpeg
export PATH=$FFMPEG_HOME/bin:$PATH  
```
![](/assets/微信截图_20180123170138.png)
```
source /etc/profile #使之生效
```
如果source命令后提示错误的配置，会导致profile文件失效，linux命令部分失效。
我们需要输入 export PATH=/usr/bin:/usr/sbin:/bin:/sbin:/usr/X11R6/bin 
使得linux命令恢复，并尽快修复profile文件。
>shell命令基本都在/usr/bin，/usr/sbin，/bin，/sbin，/usr/X11R6/bin中定义

####6.ffmpeg验收
```
ffmpeg -version
```